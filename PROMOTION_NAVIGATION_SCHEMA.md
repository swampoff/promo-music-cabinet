# 🗺️ СХЕМА НАВИГАЦИИ - Раздел "Продвижение"

**Версия:** 2.0  
**Обновлено:** 27 января 2026

---

## 📊 ВИЗУАЛЬНАЯ СХЕМА

```
┌─────────────────────────────────────────────────────────────────┐
│                         APP.TSX                                 │
│                     (Главное приложение)                        │
└─────────────────────────────────────────────────────────────────┘
                              │
                              │ Боковое меню
                              │ Клик на "Продвижение" 🚀
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                      PROMOTION HUB                              │
│                   (Главная страница)                            │
│                                                                 │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐                       │
│  │ Питчинг  │ │ 360° Prod│ │ Маркетинг│                       │
│  │  990 ₽   │ │ 49,900 ₽ │ │ 9,900 ₽  │                       │
│  └────┬─────┘ └────┬─────┘ └────┬─────┘                       │
│       │            │            │                               │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐                       │
│  │ PR и СМИ │ │  Event   │ │PROMO Lab │                       │
│  │ 14,900 ₽ │ │ 19,900 ₽ │ │По запросу│                       │
│  └────┬─────┘ └────┬─────┘ └────┬─────┘                       │
│       │            │            │                               │
└───────┼────────────┼────────────┼───────────────────────────────┘
        │            │            │
        │ Клик       │ Клик       │ Клик
        ▼            ▼            ▼
┌──────────────┐┌──────────────┐┌──────────────┐
│   PITCHING   ││ PRODUCTION360││  MARKETING   │
│              ││              ││              │
│[◀ Назад]     ││[◀ Назад]     ││[◀ Назад]     │
│              ││              ││              │
│┌────────────┐││┌────────────┐││┌────────────┐│
││ Статистика ││││ Статистика ││││ Статистика ││
│└────────────┘││└────────────┘││└────────────┘│
│              ││              ││              │
│┌────────────┐││┌────────────┐││┌────────────┐│
││   Форма    ││││   Форма    ││││   Форма    ││
│└────────────┘││└────────────┘││└────────────┘│
│              ││              ││              │
│┌────────────┐││┌────────────┐││┌────────────┐│
││   Список   ││││   Список   ││││   Список   ││
││   заявок   ││││  проектов  ││││  кампаний  ││
│└────────────┘││└────────────┘││└────────────┘│
└──────────────┘└──────────────┘└──────────────┘
                                
┌──────────────┐┌──────────────┐┌──────────────┐
│    MEDIA     ││    EVENT     ││  PROMO LAB   │
│              ││              ││              │
│[◀ Назад]     ││[◀ Назад]     ││[◀ Назад]     │
│              ││              ││              │
│┌────────────┐││┌────────────┐││┌────────────┐│
││ Статистика ││││ Статистика ││││ Статистика ││
│└────────────┘││└────────────┘││└────────────┘│
│              ││              ││              │
│┌────────────┐││┌────────────┐││┌────────────┐│
││   Форма    ││││   Форма    ││││   Форма    ││
│└────────────┘││└────────────┘││└────────────┘│
│              ││              ││              │
│┌────────────┐││┌────────────┐││┌────────────┐│
││   Список   ││││   Список   ││││   Список   ││
││PR-заявок   ││││  событий   ││││экспериментов││
│└────────────┘││└────────────┘││└────────────┘│
└──────────────┘└──────────────┘└──────────────┘
```

---

## 🔄 FLOW ПОЛЬЗОВАТЕЛЯ

### Сценарий 1: Отправка трека на питчинг

```
START
  │
  ├─► [Меню] Клик "Продвижение"
  │
  ├─► [Hub] Показ 6 карточек услуг
  │
  ├─► [Hub] Клик на "Питчинг" (990 ₽)
  │
  ├─► [Pitching] Открывается страница
  │      │
  │      ├─► Видит статистику (0 заявок)
  │      │
  │      ├─► Заполняет форму:
  │      │    - Тип: Standard
  │      │    - Название: "My Track"
  │      │    - Сообщение: "Hello..."
  │      │
  │      ├─► Клик "Отправить заявку"
  │      │
  │      ├─► Toast: ✅ "Заявка отправлена!"
  │      │
  │      └─► Заявка появляется в списке
  │
  ├─► [Pitching] Клик "Назад" (◀)
  │
  └─► [Hub] Возврат на главную
  
END
```

---

## 🎯 СОСТОЯНИЯ СТРАНИЦ

### PromotionHub (главная)

```
STATE: null | 'pitching' | 'production360' | 'marketing' | 'media' | 'event' | 'promolab'

┌─────────────────────────────────────┐
│ currentPage = null                  │
│ ↓                                   │
│ Показываем grid с 6 карточками      │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ currentPage = 'pitching'            │
│ ↓                                   │
│ Рендерим <PromotionPitching />      │
│ Показываем кнопку "Назад"           │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ currentPage = 'marketing'           │
│ ↓                                   │
│ Рендерим <PromotionMarketing />     │
│ Показываем кнопку "Назад"           │
└─────────────────────────────────────┘
```

### Подстраницы (например, Pitching)

```
STATES:

┌─────────────────────────────────────┐
│ loading = true                      │
│ ↓                                   │
│ Показываем Loader                   │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ loading = false                     │
│ error = "Network error"             │
│ ↓                                   │
│ Показываем Error State              │
│ с кнопкой "Попробовать снова"       │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ loading = false                     │
│ error = null                        │
│ requests.length = 0                 │
│ ↓                                   │
│ Показываем Empty State              │
│ "Нет заявок. Создайте первую!"      │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ loading = false                     │
│ error = null                        │
│ requests.length > 0                 │
│ ↓                                   │
│ Показываем список заявок            │
└─────────────────────────────────────┘
```

---

## 📱 RESPONSIVE LAYOUT

### Mobile (< 768px)

```
┌─────────────────┐
│  [☰] Menu       │
│                 │
│  ┌───────────┐  │
│  │ Питчинг   │  │
│  │  990 ₽    │  │
│  └───────────┘  │
│                 │
│  ┌───────────┐  │
│  │360° Prod  │  │
│  │ 49,900 ₽  │  │
│  └───────────┘  │
│                 │
│  ┌───────────┐  │
│  │ Маркетинг │  │
│  │ 9,900 ₽   │  │
│  └───────────┘  │
│                 │
└─────────────────┘
   1 колонка
```

### Tablet (768px - 1024px)

```
┌─────────────────────────────────┐
│  ┌───────────┐  ┌───────────┐   │
│  │ Питчинг   │  │360° Prod  │   │
│  │  990 ₽    │  │ 49,900 ₽  │   │
│  └───────────┘  └───────────┘   │
│                                  │
│  ┌───────────┐  ┌───────────┐   │
│  │ Маркетинг │  │ PR и СМИ  │   │
│  │ 9,900 ₽   │  │ 14,900 ₽  │   │
│  └───────────┘  └───────────┘   │
│                                  │
└─────────────────────────────────┘
        2 колонки
```

### Desktop (> 1024px)

```
┌──────────────────────────────────────────────────┐
│  ┌──────┐  ┌──────┐  ┌──────┐                   │
│  │Питчинг│  │360°  │  │Маркет│                   │
│  │990 ₽ │  │49,900│  │9,900 │                   │
│  └──────┘  └──────┘  └──────┘                   │
│                                                   │
│  ┌──────┐  ┌──────┐  ┌──────┐                   │
│  │PR СМИ│  │Event │  │PROMO │                   │
│  │14,900│  │19,900│  │ Lab  │                   │
│  └──────┘  └──────┘  └──────┘                   │
│                                                   │
└──────────────────────────────────────────────────┘
               3 колонки
```

---

## 🔐 ИНТЕГРАЦИЯ С КОНТЕКСТАМИ

### AuthContext

```
┌─────────────────────────────────────┐
│        AuthContext                  │
│                                     │
│  userId: "demo-user-123"            │
│  isAuthenticated: true              │
│  userEmail: "demo@promo.music"      │
└─────────────────────────────────────┘
              │
              │ useAuth()
              ▼
┌─────────────────────────────────────┐
│    PromotionPitching                │
│                                     │
│  const { userId } = useAuth();      │
│                                     │
│  // Используется в API запросах     │
│  fetch(`/promotion/pitching/${userId}`)
└─────────────────────────────────────┘
```

### SubscriptionContext

```
┌─────────────────────────────────────┐
│      SubscriptionContext            │
│                                     │
│  tier: "pro"                        │
│  limits: {                          │
│    marketing_discount: 0.15 (15%)   │
│  }                                  │
└─────────────────────────────────────┘
              │
              │ useSubscription()
              ▼
┌─────────────────────────────────────┐
│       PromotionHub                  │
│                                     │
│  const { subscription } =           │
│         useSubscription();          │
│                                     │
│  const discounted =                 │
│    price * (1 - discount);          │
│                                     │
│  990 ₽ → 842 ₽ (скидка 15%)        │
└─────────────────────────────────────┘
```

---

## 🎨 ЦВЕТОВАЯ НАВИГАЦИЯ

```
🟣 PURPLE    → Питчинг
🔵 BLUE      → 360° Production
🟢 GREEN     → Маркетинг
🟠 ORANGE    → PR и СМИ
🟡 YELLOW    → Event Management
🩷 PINK      → PROMO Lab

Пользователь видит карточку с цветом
      ↓
Открывает страницу
      ↓
Видит тот же цвет в UI
      ↓
Легко ориентируется где находится
```

---

## 🔄 ЖИЗНЕННЫЙ ЦИКЛ ЗАЯВКИ

```
СОЗДАНИЕ
   │
   ├─► [Frontend] Заполнение формы
   │
   ├─► [Frontend] Валидация
   │        │
   │        ├─ Название: 1-200 символов ✓
   │        ├─ Сообщение: 1-2000 символов ✓
   │        └─ Тип услуги: валидный ✓
   │
   ├─► [Frontend] POST запрос
   │        │
   │        └─ timeout: 15 секунд
   │
   ├─► [Backend] Валидация
   │        │
   │        ├─ Rate limit: 10 заявок/24ч ✓
   │        ├─ Санитизация строк ✓
   │        └─ Проверка типа ✓
   │
   ├─► [Database] INSERT в таблицу
   │        │
   │        └─ Статус: "pending_review"
   │
   ├─► [Backend] Ответ 200 OK
   │
   ├─► [Frontend] Toast "Успешно!" ✅
   │
   └─► [Frontend] Заявка в списке

ПРОСМОТР
   │
   ├─► [Frontend] GET запрос
   │
   ├─► [Backend] SELECT из таблицы
   │
   ├─► [Frontend] Рендер списка
   │
   └─► Пользователь видит заявку

ОБНОВЛЕНИЕ
   │
   ├─► [Админ] Меняет статус
   │
   ├─► [Backend] UPDATE в таблице
   │
   ├─► [Notification] Уведомление юзеру
   │
   └─► [Frontend] Обновление списка
```

---

## 🎯 НАВИГАЦИОННЫЕ ПАТТЕРНЫ

### Pattern 1: Hub → Service → Back

```
Hub (6 карточек)
   │ Клик на карточку
   ▼
Service Page
   │ Клик "Назад"
   ▼
Hub (6 карточек)
```

### Pattern 2: Hub → Service → Another Service

```
Hub
   │
   ├─► Pitching
   │     │ Клик "Назад"
   │     ▼
   │   Hub
   │     │ Клик "Marketing"
   │     ▼
   └─► Marketing
```

### Pattern 3: Deep Link (будущее)

```
URL: /promotion/pitching
   │
   ├─► Прямо на Pitching page
   │
   └─► Кнопка "Назад" → Hub
```

---

## 📊 АНАЛИТИКА НАВИГАЦИИ (будущее)

```
События для трекинга:

1. promotion_hub_view
   - timestamp
   - user_id

2. service_card_click
   - service_id: "pitching"
   - user_id
   - timestamp

3. service_page_view
   - service_id: "marketing"
   - user_id
   - time_spent: 45s

4. back_button_click
   - from: "pitching"
   - to: "hub"
   - user_id

5. form_submit
   - service_id: "event"
   - user_id
   - price: 19900
   - discount: 15%
```

---

## 🎭 АНИМАЦИИ ПЕРЕХОДОВ

### Hub → Service

```
АНИМАЦИЯ OUT (Hub):
  - opacity: 1 → 0
  - x: 0 → -20px
  - duration: 300ms

АНИМАЦИЯ IN (Service):
  - opacity: 0 → 1
  - x: 20px → 0
  - duration: 300ms
```

### Service → Hub

```
АНИМАЦИЯ OUT (Service):
  - opacity: 1 → 0
  - x: 0 → 20px
  - duration: 300ms

АНИМАЦИЯ IN (Hub):
  - opacity: 0 → 1
  - x: -20px → 0
  - duration: 300ms
```

---

## 🗂️ СТРУКТУРА ФАЙЛОВ

```
/src/app/pages/
│
├── PromotionHub.tsx ..................... Главная страница
│   ├─ SERVICES[] ....................... Конфиг услуг
│   ├─ currentPage state ................ Навигация
│   └─ Render logic ..................... Условный рендер
│
├── PromotionPitching.tsx ................ Питчинг
│   ├─ Form + Validation
│   ├─ Statistics Cards
│   └─ Requests List
│
├── PromotionProduction360.tsx ........... 360° Production
├── PromotionMarketing.tsx ............... Маркетинг
├── PromotionMedia.tsx ................... PR и СМИ
├── PromotionEvent.tsx ................... Event Management
└── PromotionPromoLab.tsx ................ PROMO Lab
```

---

## 🚀 ИТОГО

**Навигация:**
- ✅ 1 Hub страница
- ✅ 6 Service страниц
- ✅ Кнопка "Назад" везде
- ✅ Плавные анимации
- ✅ Responsive на всех устройствах

**Интеграция:**
- ✅ AuthContext
- ✅ SubscriptionContext
- ✅ App.tsx меню

**UX:**
- ✅ Цветовая кодировка
- ✅ Иконки
- ✅ Ценники со скидками
- ✅ Toast notifications

**Статус:** ✅ ПОЛНОСТЬЮ ГОТОВО!

---

**Версия:** 2.0  
**Дата:** 27 января 2026  
**Автор:** AI Assistant
