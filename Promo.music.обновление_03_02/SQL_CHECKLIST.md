# ‚úÖ CHECKLIST: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ SQL –º–∏–≥—Ä–∞—Ü–∏–π

## üö® SQL –ú–ò–ì–†–ê–¶–ò–ò –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´ –î–õ–Ø –†–ê–ë–û–¢–´ –°–ò–°–¢–ï–ú–´

---

## üìã –ü–û–®–ê–ì–û–í–´–ô CHECKLIST

### **–®–ê–ì 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞** ‚è±Ô∏è 10 —Å–µ–∫—É–Ω–¥

- [ ] –û—Ç–∫—Ä—ã—Ç Supabase Dashboard (https://supabase.com/dashboard)
- [ ] –í—ã–±—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
- [ ] –ï—Å—Ç—å –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- [ ] –û—Ç–∫—Ä—ã—Ç —Ñ–∞–π–ª `/APPLY_NOW.sql` –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ

---

### **–®–ê–ì 2: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ SQL** ‚è±Ô∏è 30 —Å–µ–∫—É–Ω–¥

- [ ] –û—Ç–∫—Ä—ã—Ç **SQL Editor** –≤ Dashboard
- [ ] –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ **"New query"**
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ **–í–°–Å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ** —Ñ–∞–π–ª–∞ `/APPLY_NOW.sql`
- [ ] –í—Å—Ç–∞–≤–ª–µ–Ω–æ –≤ SQL Editor
- [ ] –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ **"RUN"** (–∏–ª–∏ Ctrl+Enter)
- [ ] –î–æ–∂–¥–∞–ª–∏—Å—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (~10-30 —Å–µ–∫—É–Ω–¥)
- [ ] –£–≤–∏–¥–µ–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ "Success" ‚úÖ

---

### **–®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü** ‚è±Ô∏è 10 —Å–µ–∫—É–Ω–¥

- [ ] –û—Ç–∫—Ä—ã—Ç **Table Editor** –≤ Dashboard
- [ ] –í–∏–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `artists` ‚úÖ
- [ ] –í–∏–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `concerts` ‚úÖ
- [ ] –í–∏–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `notifications` ‚úÖ
- [ ] –í–∏–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `notification_settings` ‚úÖ
- [ ] –í–∏–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `email_campaigns` ‚úÖ
- [ ] –í–∏–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `ticket_providers` ‚úÖ
- [ ] –í–∏–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `artist_ticket_providers` ‚úÖ
- [ ] –í–∏–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `ticket_sales` ‚úÖ

**–ò—Ç–æ–≥–æ: 8 —Ç–∞–±–ª–∏—Ü** ‚úÖ

---

### **–®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö** ‚è±Ô∏è 5 —Å–µ–∫—É–Ω–¥

- [ ] –û—Ç–∫—Ä—ã—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ `ticket_providers`
- [ ] –í–∏–¥–Ω–æ 4 —Å—Ç—Ä–æ–∫–∏:
  - [ ] –ö–∞—Å—Å–∏—Ä.—Ä—É (5%)
  - [ ] Ticketland.ru (7%)
  - [ ] –Ø–Ω–¥–µ–∫—Å –ê—Ñ–∏—à–∞ (8%)
  - [ ] TicketMaster (10%)

---

### **–®–ê–ì 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π** ‚è±Ô∏è 10 —Å–µ–∫—É–Ω–¥

–í SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```sql
SELECT routine_name FROM information_schema.routines 
WHERE routine_schema = 'public' 
ORDER BY routine_name;
```

- [ ] –§—É–Ω–∫—Ü–∏—è `calculate_campaign_metrics` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚úÖ
- [ ] –§—É–Ω–∫—Ü–∏—è `increment_concert_clicks` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚úÖ
- [ ] –§—É–Ω–∫—Ü–∏—è `increment_concert_views` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚úÖ
- [ ] –§—É–Ω–∫—Ü–∏—è `update_updated_at_column` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚úÖ
- [ ] –§—É–Ω–∫—Ü–∏—è `is_artist_owner` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚úÖ
- [ ] –§—É–Ω–∫—Ü–∏—è `is_concert_owner` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚úÖ

**–ò—Ç–æ–≥–æ: 6 —Ñ—É–Ω–∫—Ü–∏–π** ‚úÖ

---

### **–®–ê–ì 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ RLS** ‚è±Ô∏è 10 —Å–µ–∫—É–Ω–¥

–í SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```sql
SELECT tablename, rowsecurity FROM pg_tables 
WHERE schemaname = 'public' 
ORDER BY tablename;
```

- [ ] –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏–º–µ—é—Ç `rowsecurity = true` ‚úÖ

---

### **–®–ê–ì 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤** ‚è±Ô∏è 10 —Å–µ–∫—É–Ω–¥

–í SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```sql
SELECT schemaname, tablename, indexname FROM pg_indexes 
WHERE schemaname = 'public' 
ORDER BY tablename, indexname;
```

- [ ] –í–∏–¥–Ω–æ 20+ –∏–Ω–¥–µ–∫—Å–æ–≤ ‚úÖ

---

### **–®–ê–ì 8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚è±Ô∏è 20 —Å–µ–∫—É–Ω–¥

–í SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```sql
-- –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ü–µ—Ä—Ç
INSERT INTO concerts (
  artist_id, title, city, venue_name,
  event_date, event_time, event_type
) VALUES (
  uuid_generate_v4(), '–¢–µ—Å—Ç', '–ú–æ—Å–∫–≤–∞', '–ö–ª—É–±',
  '2026-03-01', '20:00', '–ö–æ–Ω—Ü–µ—Ä—Ç'
);

-- –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ created_at —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
SELECT title, created_at, updated_at 
FROM concerts 
ORDER BY created_at DESC 
LIMIT 1;

-- –¢–µ—Å—Ç 3: –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ü–µ—Ä—Ç
DELETE FROM concerts WHERE title = '–¢–µ—Å—Ç';
```

- [ ] –ö–æ–Ω—Ü–µ—Ä—Ç —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ ‚úÖ
- [ ] `created_at` –∏ `updated_at` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚úÖ
- [ ] –ö–æ–Ω—Ü–µ—Ä—Ç —É–¥–∞–ª—ë–Ω —É—Å–ø–µ—à–Ω–æ ‚úÖ

---

### **–®–ê–ì 9: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ SQL Mode** ‚è±Ô∏è 20 —Å–µ–∫—É–Ω–¥

- [ ] –û—Ç–∫—Ä—ã—Ç Dashboard ‚Üí **Edge Functions**
- [ ] –í—ã–±—Ä–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è **`make-server-84730125`**
- [ ] –û—Ç–∫—Ä—ã—Ç —Ä–∞–∑–¥–µ–ª **Environment Variables**
- [ ] –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ **"Add variable"**
- [ ] –í–≤–µ–¥–µ–Ω–æ:
  - Key: `STORAGE_MODE`
  - Value: `sql`
- [ ] –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ **"Save"**
- [ ] –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚úÖ

---

### **–®–ê–ì 10: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** ‚è±Ô∏è 10 —Å–µ–∫—É–Ω–¥

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health
curl https://YOUR_PROJECT.supabase.co/functions/v1/make-server-84730125/health

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ SQL mode –∞–∫—Ç–∏–≤–µ–Ω
curl https://YOUR_PROJECT.supabase.co/functions/v1/make-server-84730125/concerts \
  -H "Authorization: Bearer YOUR_ANON_KEY"
```

- [ ] Health check –≤–µ—Ä–Ω—É–ª `{"status":"ok"}` ‚úÖ
- [ ] API —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

---

## üéâ –ì–û–¢–û–í–û!

### **–ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ**:
- ‚úÖ 8 —Ç–∞–±–ª–∏—Ü
- ‚úÖ 6 SQL —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ 20+ RLS –ø–æ–ª–∏—Ç–∏–∫
- ‚úÖ 20+ –∏–Ω–¥–µ–∫—Å–æ–≤
- ‚úÖ 6 —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- ‚úÖ 4 –±–∏–ª–µ—Ç–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

### **–ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ**:
- ‚úÖ Row Level Security –≤–∫–ª—é—á—ë–Ω
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ timestamps
- ‚úÖ SQL Mode –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω

### **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**:
- üöÄ 10x –±—ã—Å—Ç—Ä–µ–µ —á–µ–º KV Mode
- üîç SQL –∑–∞–ø—Ä–æ—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã
- üîê RLS –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞
- ‚ö° –ò–Ω–¥–µ–∫—Å—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

---

## ‚è±Ô∏è –û–ë–©–ï–ï –í–†–ï–ú–Ø: 2-3 –ú–ò–ù–£–¢–´

```
–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:        10 —Å–µ–∫
–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ SQL:    30 —Å–µ–∫
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü:   10 —Å–µ–∫
–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö:    5 —Å–µ–∫
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π:  10 —Å–µ–∫
–ü—Ä–æ–≤–µ—Ä–∫–∞ RLS:      10 —Å–µ–∫
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤: 10 —Å–µ–∫
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:      20 —Å–µ–∫
–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ:      20 —Å–µ–∫
–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:10 —Å–µ–∫
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ò–¢–û–ì–û:        ~2-3 –º–∏–Ω—É—Ç—ã
```

---

## üìä –°–¢–ê–¢–£–°

### **–î–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è SQL**:
```
Backend: KV Mode
–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –°—Ä–µ–¥–Ω—è—è
SQL –∑–∞–ø—Ä–æ—Å—ã: ‚ùå
RLS: ‚ùå
–ò–Ω–¥–µ–∫—Å—ã: ‚ùå
```

### **–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è SQL**:
```
Backend: SQL Mode ‚úÖ
–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 10x üöÄ
SQL –∑–∞–ø—Ä–æ—Å—ã: ‚úÖ
RLS: ‚úÖ
–ò–Ω–¥–µ–∫—Å—ã: 20+ ‚úÖ
```

---

## üö® –ï–°–õ–ò –ß–¢–û-–¢–û –ü–û–®–õ–û –ù–ï –¢–ê–ö

### **"Success. No rows returned"**
‚úÖ –≠—Ç–æ –ù–û–†–ú–ê–õ–¨–ù–û! SQL –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ.

### **"relation already exists"**
‚úÖ –≠—Ç–æ –ù–û–†–ú–ê–õ–¨–ù–û! –¢–∞–±–ª–∏—Ü–∞ —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞.

### **"permission denied"**
‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

### **"syntax error"**
‚ùå –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ –í–°–Å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `/APPLY_NOW.sql`.

### **–¢–∞–±–ª–∏—Ü—ã –Ω–µ –≤–∏–¥–Ω—ã –≤ Table Editor**
‚ùå –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5).

### **–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã**
‚ùå –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ç–æ–ª—å–∫–æ INSERT —á–∞—Å—Ç—å SQL —Å–Ω–æ–≤–∞.

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û

### **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
- `/APPLY_SQL_NOW.md` - —É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `/APPLY_NOW.sql` - –µ–¥–∏–Ω—ã–π SQL —Ñ–∞–π–ª
- `/RUN_MIGRATIONS_INSTRUCTIONS.md` - –ø–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `/QUICK_START_SQL.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### **–ü–æ–º–æ—â—å**:
- Dashboard ‚Üí Edge Functions ‚Üí Logs (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏)
- Dashboard ‚Üí Database ‚Üí Logs (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å SQL –ª–æ–≥–∏)

---

## ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô CHECKLIST

- [ ] SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [ ] 8 —Ç–∞–±–ª–∏—Ü —Å–æ–∑–¥–∞–Ω—ã
- [ ] 4 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] 6 —Ñ—É–Ω–∫—Ü–∏–π —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] RLS –≤–∫–ª—é—á—ë–Ω
- [ ] –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] SQL Mode –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
- [ ] API —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Storage —Ä–∞–±–æ—Ç–∞–µ—Ç

---

# üéâ –í–°–Å –ì–û–¢–û–í–û –ö PRODUCTION!

**–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç**:
- PostgreSQL –≤–º–µ—Å—Ç–æ KV Store
- 10x –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ü–æ–ª–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (RLS)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–∏–Ω–¥–µ–∫—Å—ã)

**–°—Ç–∞—Ç—É—Å**: üöÄ Production Ready!

---

**–î–∞—Ç–∞**: 26 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è**: 4.0.0  
**–í—Ä–µ–º—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è**: 2-3 –º–∏–Ω—É—Ç—ã  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ Success!
