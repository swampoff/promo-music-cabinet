# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–û–ö - 29 —è–Ω–≤–∞—Ä—è 2026

**–û—à–∏–±–∫–∞:** `TypeError: Cannot read properties of undefined (reading 'toLocaleString')`  
**–§–∞–π–ª:** `/src/app/components/tracks-page.tsx`  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ `TracksPage` –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞ `toLocaleString()` –Ω–∞ undefined –∑–Ω–∞—á–µ–Ω–∏—è—Ö.

### –ü—Ä–∏—á–∏–Ω–∞:

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö props** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `TracksPage` —Ç—Ä–µ–±–æ–≤–∞–ª `userCoins` –∏ `onCoinsUpdate`, –Ω–æ –≤ `ArtistApp.tsx` –æ–Ω–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å:

```typescript
// ‚ùå –ë–´–õ–û (—Å—Ç—Ä–æ–∫–∞ 88 ArtistApp.tsx):
case 'tracks':
  return <TracksPage onTrackClick={setSelectedTrackId} />;
```

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç undefined** - –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –∑–Ω–∞—á–µ–Ω–∏—è –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ undefined:

```typescript
// ‚ùå –ë–´–õ–û:
{userCoins.toLocaleString()}         // undefined.toLocaleString() ‚Üí ERROR
{track.plays.toLocaleString()}       // –º–æ–∂–µ—Ç –±—ã—Ç—å undefined
{track.likes.toLocaleString()}       // –º–æ–∂–µ—Ç –±—ã—Ç—å undefined
{stats.totalPlays.toLocaleString()}  // –º–æ–∂–µ—Ç –±—ã—Ç—å undefined
```

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ü–µ—Ä–µ–¥–∞—á–∞ props –≤ ArtistApp.tsx

**–§–∞–π–ª:** `/src/app/ArtistApp.tsx` (—Å—Ç—Ä–æ–∫–∞ 88)

```typescript
// ‚úÖ –°–¢–ê–õ–û:
case 'tracks':
  return <TracksPage 
    onTrackClick={setSelectedTrackId} 
    userCoins={coinsBalance}
    onCoinsUpdate={setCoinsBalance}
    onOpenCoinsModal={() => setShowCoinsModal(true)}
  />;
```

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è `userCoins={coinsBalance}` (1250 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- ‚úÖ –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è `onCoinsUpdate={setCoinsBalance}` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è `onOpenCoinsModal` –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–∫–∏ –ø–æ–∫—É–ø–∫–∏ –∫–æ–∏–Ω–æ–≤

---

### 2. –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–§–∞–π–ª:** `/src/app/components/tracks-page.tsx`

```typescript
// ‚úÖ –ë–´–õ–û (—Å—Ç—Ä–æ–∫–∞ 56-63):
interface TracksPageProps {
  userCoins: number;
  onCoinsUpdate: (coins: number) => void;
  onTrackClick?: (trackId: number) => void;
  onOpenCoinsModal?: () => void;
}

export function TracksPage({ userCoins, onCoinsUpdate, onTrackClick, onOpenCoinsModal }: TracksPageProps) {
```

```typescript
// ‚úÖ –°–¢–ê–õ–û:
interface TracksPageProps {
  userCoins?: number;                        // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
  onCoinsUpdate?: (coins: number) => void;   // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
  onTrackClick?: (trackId: number) => void;
  onOpenCoinsModal?: () => void;
}

export function TracksPage({ 
  userCoins = 0,                  // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0
  onCoinsUpdate = () => {},       // –ü—É—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  onTrackClick, 
  onOpenCoinsModal 
}: TracksPageProps) {
```

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ Props —Å—Ç–∞–ª–∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ –ï—Å–ª–∏ props –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 0 –≤–º–µ—Å—Ç–æ undefined

---

### 3. –ó–∞—â–∏—Ç–∞ –æ—Ç undefined –≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ stats

**–§–∞–π–ª:** `/src/app/components/tracks-page.tsx` (—Å—Ç—Ä–æ–∫–∞ 347-355)

```typescript
// ‚ùå –ë–´–õ–û:
const stats = {
  total: tracks.length,
  approved: tracks.filter(t => t.status === 'approved').length,
  pending: tracks.filter(t => t.status === 'pending').length,
  rejected: tracks.filter(t => t.status === 'rejected').length,
  draft: tracks.filter(t => t.status === 'draft').length,
  totalPlays: tracks.reduce((sum, t) => sum + t.plays, 0),      // ‚ùå
  totalLikes: tracks.reduce((sum, t) => sum + t.likes, 0),      // ‚ùå
};
```

```typescript
// ‚úÖ –°–¢–ê–õ–û:
const stats = {
  total: tracks.length,
  approved: tracks.filter(t => t.status === 'approved').length,
  pending: tracks.filter(t => t.status === 'pending').length,
  rejected: tracks.filter(t => t.status === 'rejected').length,
  draft: tracks.filter(t => t.status === 'draft').length,
  totalPlays: tracks.reduce((sum, t) => sum + (t.plays || 0), 0),   // ‚úÖ
  totalLikes: tracks.reduce((sum, t) => sum + (t.likes || 0), 0),   // ‚úÖ
};
```

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ `t.plays || 0` - –µ—Å–ª–∏ plays undefined, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 0
- ‚úÖ `t.likes || 0` - –µ—Å–ª–∏ likes undefined, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 0

---

### 4. –ó–∞—â–∏—Ç–∞ –æ—Ç undefined –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏

**–í—Å–µ –º–µ—Å—Ç–∞ –≤ `/src/app/components/tracks-page.tsx`:**

#### 4.1. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∫–æ–∏–Ω–æ–≤ (—Å—Ç—Ä–æ–∫–∞ 591):

```typescript
// ‚ùå –ë–´–õ–û:
<span className="text-white font-semibold">{userCoins.toLocaleString()}</span>

// ‚úÖ –°–¢–ê–õ–û:
<span className="text-white font-semibold">{(userCoins || 0).toLocaleString()}</span>
```

#### 4.2. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (—Å—Ç—Ä–æ–∫–∏ 674, 684):

```typescript
// ‚ùå –ë–´–õ–û:
<div className="text-3xl font-bold">{stats.totalPlays.toLocaleString()}</div>
<div className="text-3xl font-bold">{stats.totalLikes.toLocaleString()}</div>

// ‚úÖ –°–¢–ê–õ–û:
<div className="text-3xl font-bold">{(stats.totalPlays || 0).toLocaleString()}</div>
<div className="text-3xl font-bold">{(stats.totalLikes || 0).toLocaleString()}</div>
```

#### 4.3. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ plays/likes —Ç—Ä–µ–∫–∞ (—Å—Ç—Ä–æ–∫–∏ 894, 898):

```typescript
// ‚ùå –ë–´–õ–û:
<span>{track.plays.toLocaleString()}</span>
<span>{track.likes.toLocaleString()}</span>

// ‚úÖ –°–¢–ê–õ–û:
<span>{(track.plays || 0).toLocaleString()}</span>
<span>{(track.likes || 0).toLocaleString()}</span>
```

#### 4.4. –ë–∞–ª–∞–Ω—Å –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ (—Å—Ç—Ä–æ–∫–∞ 1527):

```typescript
// ‚ùå –ë–´–õ–û:
<span className="text-white font-bold">{userCoins.toLocaleString()}</span>

// ‚úÖ –°–¢–ê–õ–û:
<span className="text-white font-bold">{(userCoins || 0).toLocaleString()}</span>
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å–µ–≥–æ:
- ‚úÖ **1 —Ñ–∞–π–ª** - `/src/app/ArtistApp.tsx`
- ‚úÖ **1 —Ñ–∞–π–ª** - `/src/app/components/tracks-page.tsx`
- ‚úÖ **8 –º–µ—Å—Ç** —Å –≤—ã–∑–æ–≤–æ–º `toLocaleString()`

### –¢–∏–ø—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
1. ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ props –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
2. ‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ props —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
3. ‚úÖ –ó–∞—â–∏—Ç–∞ –≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö (`reduce`)
4. ‚úÖ –ó–∞—â–∏—Ç–∞ –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ (–≤—Å–µ `toLocaleString()`)

---

## üéØ –ü—Ä–∏–Ω—Ü–∏–ø –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–í–µ–∑–¥–µ, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `value.toLocaleString()`, –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∑–∞—â–∏—Ç–∞:

```typescript
// –ü–∞—Ç—Ç–µ—Ä–Ω –∑–∞—â–∏—Ç—ã:
(value || 0).toLocaleString()

// –ò–ª–∏ —Å optional chaining:
value?.toLocaleString() ?? '0'
```

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ï—Å–ª–∏ `value` —ç—Ç–æ `undefined` –∏–ª–∏ `null`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `0`
- `0.toLocaleString()` –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `"0"`
- –û—à–∏–±–∫–∞ `Cannot read properties of undefined` –±–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç:

1. ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ —Ä–∞–∑–¥–µ–ª–∞ "–ú–æ–∏ —Ç—Ä–µ–∫–∏"
2. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∫–æ–∏–Ω–æ–≤ (–¥–∞–∂–µ –µ—Å–ª–∏ undefined)
3. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (0 –≤–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏)
4. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ plays/likes —Ç—Ä–µ–∫–æ–≤
5. ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è

### –ó–∞—â–∏—Ç–∞ –æ—Ç edge cases:

```typescript
‚úÖ userCoins = undefined  ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è 0
‚úÖ track.plays = undefined ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è 0
‚úÖ track.likes = undefined ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è 0
‚úÖ stats.totalPlays = undefined ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è 0
‚úÖ stats.totalLikes = undefined ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è 0
```

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ?

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ç–∞–∫—É—é –∂–µ –∑–∞—â–∏—Ç—É –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:

1. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å props –Ω–∞ undefined
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
3. –î–æ–±–∞–≤–ª—è—Ç—å `|| 0` –ø–µ—Ä–µ–¥ `toLocaleString()`
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å optional chaining `?.` –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ

---

## üìù –ó–∞–º–µ—Ç–∫–∏

### TypeScript —Ç–∏–ø—ã

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Track` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:
```typescript
interface Track {
  plays: number;   // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å number
  likes: number;   // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å number
}
```

–ù–æ –≤ runtime –º–æ–≥—É—Ç –±—ã—Ç—å undefined –∏–∑-–∑–∞:
- –ù–µ–ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ API
- –ß–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –±–µ–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ù–æ–≤—ã—Ö —Ç—Ä–µ–∫–æ–≤ –±–µ–∑ plays/likes

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–î–∞—Ç–∞:** 29 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 2.1.1

---

**–í—Å–µ –æ—à–∏–±–∫–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã! –ö–æ–º–ø–æ–Ω–µ–Ω—Ç TracksPage —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ.**
