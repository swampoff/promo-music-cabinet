# ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ SQL –∫ Supabase

## üéØ –ó–ê 5 –ú–ò–ù–£–¢

### **–®–ê–ì 1: –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard**

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞: https://supabase.com/dashboard
2. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç

---

### **–®–ê–ì 2: –û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor**

1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –Ω–∞–π–¥–∏—Ç–µ **`SQL Editor`** (–∏–∫–æ–Ω–∫–∞ üìù)
2. –ù–∞–∂–º–∏—Ç–µ **`New query`**

---

### **–®–ê–ì 3: –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –ø–µ—Ä–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é**

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª** –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:
   ```
   /supabase/migrations/001_initial_schema.sql
   ```

2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–°–Å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ** (Ctrl+A, Ctrl+C)

3. **–í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor** (Ctrl+V)

4. **–ù–∞–∂–º–∏—Ç–µ `RUN`** (–∏–ª–∏ Ctrl+Enter)

5. **–î–æ–∂–¥–∏—Ç–µ—Å—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** (~5-10 —Å–µ–∫—É–Ω–¥)
   - –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: ‚úÖ `Success. No rows returned`

6. **–ï—Å–ª–∏ –æ—à–∏–±–∫–∞** - —Å–º–æ—Ç—Ä–∏—Ç–µ –≤–Ω–∏–∑—É, —á—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

---

### **–®–ê–ì 4: –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –≤—Ç–æ—Ä—É—é –º–∏–≥—Ä–∞—Ü–∏—é**

1. **–ù–∞–∂–º–∏—Ç–µ `New query`** (—Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å)

2. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª**:
   ```
   /supabase/migrations/002_row_level_security.sql
   ```

3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–°–Å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ**

4. **–í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor**

5. **–ù–∞–∂–º–∏—Ç–µ `RUN`**

6. **–î–æ–∂–¥–∏—Ç–µ—Å—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**
   - –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: ‚úÖ `Success. No rows returned`

---

### **–®–ê–ì 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å—ë —Å–æ–∑–¥–∞–Ω–æ**

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `Table Editor`** (–ª–µ–≤–æ–µ –º–µ–Ω—é, –∏–∫–æ–Ω–∫–∞ üìä)

2. **–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å 8 –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü**:
   ```
   ‚úÖ artists
   ‚úÖ concerts
   ‚úÖ notifications
   ‚úÖ notification_settings
   ‚úÖ email_campaigns
   ‚úÖ ticket_providers (—Å 4 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏)
   ‚úÖ artist_ticket_providers
   ‚úÖ ticket_sales
   ```

3. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ `ticket_providers`**
   - –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å 4 —Å—Ç—Ä–æ–∫–∏:
     - –ö–∞—Å—Å–∏—Ä.—Ä—É (5%)
     - Ticketland.ru (7%)
     - –Ø–Ω–¥–µ–∫—Å –ê—Ñ–∏—à–∞ (8%)
     - TicketMaster (10%)

---

### **–®–ê–ì 6: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Storage**

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É –±—Ä–∞—É–∑–µ—Ä–∞**

2. **–í—Å—Ç–∞–≤—å—Ç–µ URL** (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_PROJECT):
   ```
   https://YOUR_PROJECT.supabase.co/functions/v1/make-server-84730125/storage/status
   ```

3. **–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å JSON**:
   ```json
   {
     "success": true,
     "initialized": true,
     "bucketsCreated": [
       "make-84730125-concert-banners",
       "make-84730125-artist-avatars",
       ...
     ],
     "errors": []
   }
   ```

4. **–ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Dashboard**:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **`Storage`** (–ª–µ–≤–æ–µ –º–µ–Ω—é)
   - –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å 6 –Ω–æ–≤—ã—Ö buckets

---

## ‚úÖ –ì–û–¢–û–í–û!

### **–ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç**:

‚úÖ **8 SQL —Ç–∞–±–ª–∏—Ü** —Å –¥–∞–Ω–Ω—ã–º–∏
‚úÖ **6 Storage buckets** –¥–ª—è —Ñ–∞–π–ª–æ–≤
‚úÖ **RLS –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** –≤–∫–ª—é—á–µ–Ω–∞
‚úÖ **4 SQL —Ñ—É–Ω–∫—Ü–∏–∏** —Ä–∞–±–æ—Ç–∞—é—Ç
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã** –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### **–ß—Ç–æ –¥–∞–ª—å—à–µ**:

#### **–û–ø—Ü–∏—è A: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å KV Store** (–Ω–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è—Ç—å)
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- SQL —Ç–∞–±–ª–∏—Ü—ã –≥–æ—Ç–æ–≤—ã, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –ø–æ–∑–∂–µ

#### **–û–ø—Ü–∏—è B: –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ SQL** (–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
1. Dashboard ‚Üí Edge Functions ‚Üí `make-server-84730125`
2. Environment Variables ‚Üí Add variable
   - Key: `STORAGE_MODE`
   - Value: `sql`
3. Save
4. –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
5. –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL! üöÄ

‚ö†Ô∏è **–ü–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º**: –º–∏–≥—Ä–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ KV Store (–µ—Å–ª–∏ –µ—Å—Ç—å)

---

## üî• –ë–´–°–¢–†–ê–Ø –ü–†–û–í–ï–†–ö–ê

### **–¢–µ—Å—Ç 1: SQL —Ä–∞–±–æ—Ç–∞–µ—Ç**

–í SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```sql
SELECT COUNT(*) FROM concerts;
SELECT COUNT(*) FROM artists;
SELECT * FROM ticket_providers;
```

–î–æ–ª–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫.

### **–¢–µ—Å—Ç 2: Storage —Ä–∞–±–æ—Ç–∞–µ—Ç**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL:
```
https://YOUR_PROJECT.supabase.co/functions/v1/make-server-84730125/storage/buckets
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ buckets.

### **–¢–µ—Å—Ç 3: –§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç**

–í SQL Editor:
```sql
-- –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ü–µ—Ä—Ç
INSERT INTO concerts (
  artist_id, title, city, venue_name,
  event_date, event_time, event_type
) VALUES (
  gen_random_uuid(), '–¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ü–µ—Ä—Ç', 
  '–ú–æ—Å–∫–≤–∞', '–ö–ª—É–±', '2026-03-01', '20:00', '–ö–æ–Ω—Ü–µ—Ä—Ç'
);

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ updated_at —É—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
SELECT title, created_at, updated_at 
FROM concerts 
ORDER BY created_at DESC 
LIMIT 1;
```

updated_at –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏! ‚úÖ

---

## üÜò –ß–¢–û-–¢–û –ü–û–®–õ–û –ù–ï –¢–ê–ö?

### **–û—à–∏–±–∫–∞: "permission denied"**
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã –≤–ª–∞–¥–µ–ª–µ—Ü –ø—Ä–æ–µ–∫—Ç–∞
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Service Role Key

### **–û—à–∏–±–∫–∞: "relation already exists"**
- –¢–∞–±–ª–∏—Ü–∞ —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞
- –ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ç—É —á–∞—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
- –ò–ª–∏ —É–¥–∞–ª–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É: `DROP TABLE table_name CASCADE;`

### **Storage –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: Dashboard ‚Üí Edge Functions ‚Üí Logs
2. –ü–æ–∏—â–∏—Ç–µ "Storage initialized"
3. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - —Å–º–æ—Ç—Ä–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏

### **–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?**
–°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–ª–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ `/APPLY_MIGRATIONS.md`

---

## üéâ –í–°–Å –ì–û–¢–û–í–û!

**–í–∞—à Supabase —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç**:
- ‚úÖ Production-ready SQL —Å—Ö–µ–º—É
- ‚úÖ Row Level Security
- ‚úÖ Storage –¥–ª—è —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏–∏

**–í—Ä–µ–º—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è**: 5 –º–∏–Ω—É—Ç ‚è±Ô∏è

**–°—Ç–∞—Ç—É—Å**: üöÄ Production Ready!

---

**–î–∞—Ç–∞**: 26 —è–Ω–≤–∞—Ä—è 2026
