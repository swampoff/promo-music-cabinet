# 🎨 КАК ОБНОВИТЬ ПРЕВЬЮ В FIGMA MAKE

## ✅ ВСЕ ИЗМЕНЕНИЯ УЖЕ В КОДЕ!

Файлы обновлены:
- ✅ `/src/admin/TrackModeration.tsx` - кнопки добавлены (строка 770)
- ✅ `/src/admin/components/TrackDetailsModal.tsx` - полностью переработан (1067+ строк)

## 🔄 СПОСОБЫ ОБНОВИТЬ ПРЕВЬЮ В FIGMA MAKE:

### Способ 1: Кнопка обновления (БЫСТРЫЙ)
1. Найдите кнопку **обновления/refresh** в панели превью Figma Make
2. Нажмите на неё
3. Подождите ~5-10 секунд
4. Готово! ✅

### Способ 2: Закрыть и открыть превью
1. Закройте текущую панель превью
2. Откройте её заново
3. Приложение перезагрузится с новым кодом

### Способ 3: Перезапустить Figma Make
1. Закройте проект в Figma Make
2. Откройте его заново
3. Дождитесь полной загрузки

### Способ 4: Hard Refresh (в превью)
Если превью открывается в iframe:
1. Кликните внутрь превью
2. Нажмите `Ctrl+Shift+R` (Windows) или `Cmd+Shift+R` (Mac)
3. Страница перезагрузится

---

## 🎯 ЧТО ВЫ ДОЛЖНЫ УВИДЕТЬ:

### В списке треков (Admin → Модерация треков):

#### PENDING треки:
```
┌─────────────────────────────────────────────────┐
│ 🎵 Track Name                                   │
│ Artist • Genre                                  │
│                                                 │
│ [🟢 Одобрить] [🔴 Отклонить] [👁️]              │
└─────────────────────────────────────────────────┘
```

#### APPROVED треки:
```
┌─────────────────────────────────────────────────┐
│ 🎵 Track Name                                   │
│ Artist • Genre                                  │
│                                                 │
│ [⚙️ Управление] ← Градиентная кнопка            │
└─────────────────────────────────────────────────┘
```

#### REJECTED треки:
```
┌─────────────────────────────────────────────────┐
│ 🎵 Track Name                                   │
│ Artist • Genre                                  │
│                                                 │
│ [🟢 Одобрить] [👁️]                              │
└─────────────────────────────────────────────────┘
```

---

### В модальном окне (нажать на трек):

#### Header:
```
┌─────────────────────────────────────────────────┐
│ [Обложка] Track Name                        [X] │
│  20x20     Artist • Genre                       │
│            [На модерации] [⭐ Featured]         │
└─────────────────────────────────────────────────┘
```

#### Вкладки:
```
[🔵 Детали] [🟠 Модерация] [🟣 Аудит] [📧 Рассылка] [🎯 Питчинг] [📻 Радио]
```

#### Вкладка "Модерация" (для pending):
```
┌─────────────────────────────────────────────────┐
│ 🛡️ Модерация трека                              │
│                                                 │
│ Быстрая информация:                             │
│ • Название: ...                                 │
│ • Артист: ...                                   │
│                                                 │
│ Заметки модератора:                             │
│ [___________________________________]            │
│                                                 │
│ Причина отклонения (если отклоняете):           │
│ [___________________________________]            │
│                                                 │
│ [🟢 ОДОБРИТЬ ТРЕК]  ← крупная зеленая          │
│ [🔴 ОТКЛОНИТЬ ТРЕК] ← крупная красная          │
└─────────────────────────────────────────────────┘
```

#### Вкладка "Аудит":
```
┌─────────────────────────────────────────────────┐
│ 🟢 Трек загружен                                │
│    user@email.com • 2 часа назад                │
│                                                 │
│ 🟢 Трек одобрен                                 │
│    Admin • 1 час назад                          │
│    Заметки: Отличный трек!                      │
│                                                 │
│ 🟢 Featured включен                             │
│    Admin • 30 минут назад                       │
└─────────────────────────────────────────────────┘
```

---

## 🐛 ЕСЛИ ПРЕВЬЮ НЕ ОБНОВЛЯЕТСЯ:

### Проверка 1: Консоль разработчика
1. Откройте консоль в Figma (если есть доступ)
2. Ищите ошибки компиляции
3. Если есть ошибки - сообщите мне

### Проверка 2: Проверьте путь
Убедитесь, что вы:
1. Залогинились как **Admin**
2. Перешли в раздел **"Модерация треков"**
3. Видите список треков

### Проверка 3: Демо данные
Если треков нет вообще:
1. API возвращает демо-данные автоматически
2. Должны быть минимум 3 демо-трека
3. Если пусто - проблема в API

---

## 📝 КОД НА МЕСТЕ - ДОКАЗАТЕЛЬСТВА:

### Файл `/src/admin/TrackModeration.tsx` (строка 770):
```tsx
<button
  onClick={(e) => {
    e.stopPropagation();
    handleApprove(track.id);
  }}
  disabled={moderating === track.id}
  className="flex-1 sm:flex-initial px-4 py-2 bg-green-500 hover:bg-green-600 text-white border border-green-600 rounded-lg font-semibold transition-all shadow-lg hover:shadow-green-500/50 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
  title="Одобрить трек"
>
  {moderating === track.id ? (
    <Loader2 className="w-5 h-5 animate-spin" />
  ) : (
    <CheckCircle className="w-5 h-5" />
  )}
  <span>Одобрить</span>
</button>
```

### Файл `/src/admin/components/TrackDetailsModal.tsx` (строка 1067):
```tsx
<button
  onClick={handleApprove}
  disabled={moderating}
  className="flex-1 py-4 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white rounded-lg font-bold text-lg transition-all shadow-lg shadow-green-500/30 disabled:opacity-50 disabled:shadow-none flex items-center justify-center gap-2"
>
  {moderating ? (
    <>
      <Loader2 className="w-6 h-6 animate-spin" />
      Обработка...
    </>
  ) : (
    <>
      <CheckCircle className="w-6 h-6" />
      Одобрить трек
    </>
  )}
</button>
```

---

## 🔍 КАК ПРОВЕРИТЬ, ЧТО КОД ЗАГРУЖЕН:

Если у вас есть доступ к DevTools в Figma Make:
1. Откройте Sources/Источники
2. Найдите `/src/admin/TrackModeration.tsx`
3. Найдите строку 770
4. Должна быть: `className="flex-1 sm:flex-initial px-4 py-2 bg-green-500`

Если эта строка есть - код загружен правильно!

---

## 💡 ВАЖНО:

**Figma Make** иногда кеширует предыдущие версии кода.

**Решение:**
1. Обновите превью (кнопка refresh)
2. Если не помогло - перезапустите проект
3. Если не помогло - закройте и откройте Figma

**Все изменения УЖЕ в коде!** Просто нужно обновить превью! 🚀

---

**Статус:** ✅ Код готов и на месте  
**Действие:** Обновите превью в Figma Make  
**Дата:** 29 января 2026
