# üéµ –°–ò–°–¢–ï–ú–ê –ú–û–î–ï–†–ê–¶–ò–ò –¢–†–ï–ö–û–í - –ì–û–¢–û–í–ê!

## ‚úÖ –°–û–ó–î–ê–ù–ê –ü–û–õ–ù–ê–Ø –î–í–£–•–≠–¢–ê–ü–ù–ê–Ø –°–ò–°–¢–ï–ú–ê

**–î–∞—Ç–∞:** 29 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

---

## üìã **–ß–¢–û –°–û–ó–î–ê–ù–û:**

### **1. SQL –ë–ê–ó–ê –î–ê–ù–ù–´–•** ‚úÖ
```
üìÅ /SQL_TRACK_MODERATION.sql
```

#### **–¢–∞–±–ª–∏—Ü–∞: pending_tracks_84730125**
```sql
- ID (UUID primary key)
- –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: title, artist, cover, audio, duration, genre
- –°—Å—ã–ª–∫–∏: yandex_music, youtube, spotify, apple_music  
- –ó–∞–≥—Ä—É–∑–∏–≤—à–∏–π: uploaded_by_email, uploaded_by_user_id
- –°—Ç–∞—Ç—É—Å—ã: moderation_status, payment_status
- –ú–æ–¥–µ—Ä–∞—Ü–∏—è: overall_score (1-10), moderator_notes, rejection_reason
- –°–≤—è–∑–∏: artist_profile_id, label_id, published_track_id
```

**–°—Ç–∞—Ç—É—Å—ã –º–æ–¥–µ—Ä–∞—Ü–∏–∏:**
```
pending ‚Üí approved ‚Üí approved_and_migrated
       ‚Üò rejected
```

**–§—É–Ω–∫—Ü–∏–∏ SQL:**
- ‚úÖ `get_monthly_upload_count_84730125()` - –ø–æ–¥—Å—á–µ—Ç –∑–∞–≥—Ä—É–∑–æ–∫ –∑–∞ –º–µ—Å—è—Ü
- ‚úÖ `get_upload_limit_by_subscription_84730125()` - –ª–∏–º–∏—Ç—ã –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ
- ‚úÖ View `pending_tracks_with_user_info_84730125` - –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

### **2. BACKEND API** ‚úÖ
```
üìÅ /supabase/functions/server/track-moderation-routes.tsx
```

#### **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**

**POST /submitTrack** - –ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–µ–∫–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é
```typescript
// –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: Bearer token
// –†–æ–ª–∏: artist, label

Request Body:
{
  title: string,
  artist: string,
  cover_image_url: string,
  audio_file_url: string,
  duration: number, // —Å–µ–∫—É–Ω–¥—ã
  genre: string, // –∏–∑ —Å–ø–∏—Å–∫–∞ 27 –∂–∞–Ω—Ä–æ–≤
  yandex_music_url?: string,
  youtube_url?: string,
  spotify_url?: string,
  apple_music_url?: string
}

Response:
{
  success: true,
  pending_track_id: "uuid",
  message: "–¢—Ä–µ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é"
}

// –ü—Ä–æ–≤–µ—Ä–∫–∏:
‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚úÖ –†–æ–ª—å (artist/label)
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π
‚úÖ –õ–∏–º–∏—Ç –∑–∞–≥—Ä—É–∑–æ–∫ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞—Ä—Ç–∏—Å—Ç–æ–≤)
‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ artist_profile (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∞—Ä—Ç–∏—Å—Ç—É + –∞–¥–º–∏–Ω–∞–º)
```

**GET /pendingTracks** - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤
```typescript
// –§–∏–ª—å—Ç—Ä—ã (query params):
- status: pending/approved/rejected
- genre: Rock/Pop/etc
- search: –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/–∞—Ä—Ç–∏—Å—Ç—É
- minScore: 1-10
- maxScore: 1-10

// –î–ª—è –∞–¥–º–∏–Ω–æ–≤ - –≤–∏–¥—è—Ç –≤—Å–µ
// –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏
```

**POST /manageTrackModeration** - –ú–æ–¥–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–∫–∞
```typescript
// –†–æ–ª–∏: admin, supervisor_admin, owner

Request Body (APPROVE):
{
  pendingTrackId: "uuid",
  action: "approve",
  overallScore?: number, // 1-10
  moderatorNotes?: string
}

Response:
{
  success: true,
  message: "Track approved and published",
  trackId: "uuid",
  coinsAwarded: 50 // ü™ô Promo-–∫–æ–∏–Ω—ã
}

// –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
‚úÖ –°–æ–∑–¥–∞–µ—Ç—Å—è Track –≤ –ø—É–±–ª–∏—á–Ω–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ
‚úÖ PendingTrack ‚Üí status: approved_and_migrated
‚úÖ +50 –∫–æ–∏–Ω–æ–≤ –∞—Ä—Ç–∏—Å—Ç—É
‚úÖ Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
‚úÖ –°–∏—Å—Ç–µ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

---

Request Body (REJECT):
{
  pendingTrackId: "uuid",
  action: "reject",
  rejectionReason: string, // –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!
  overallScore?: number,
  moderatorNotes?: string
}

Response:
{
  success: true,
  message: "Track rejected"
}

// –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
‚úÖ PendingTrack ‚Üí status: rejected
‚úÖ Email —Å –ø—Ä–∏—á–∏–Ω–æ–π –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
‚úÖ –°–∏—Å—Ç–µ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
```

**POST /batchModeration** - –ú–∞—Å—Å–æ–≤–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è
```typescript
Request Body:
{
  trackIds: string[], // –º–∞—Å—Å–∏–≤ ID
  action: "approve" | "reject",
  rejectionReason?: string // –¥–ª—è reject
}

// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π —Ç—Ä–µ–∫ —á–µ—Ä–µ–∑ manageTrackModeration
```

**GET /genres** - –°–ø–∏—Å–æ–∫ –∂–∞–Ω—Ä–æ–≤
```typescript
Response:
{
  genres: [
    "Pop", "Rock", "Hip-Hop", "R&B", "Electronic", "Dance",
    "House", "Techno", "Trance", "Dubstep", "Drum & Bass",
    "Jazz", "Blues", "Classical", "Country", "Folk",
    "Reggae", "Metal", "Punk", "Indie", "Alternative",
    "Soul", "Funk", "Disco", "Gospel", "Latin", "World"
  ]
}
```

**GET /uploadStats** - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∑–æ–∫
```typescript
Response:
{
  current: 2,      // –∑–∞–≥—Ä—É–∂–µ–Ω–æ –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ
  limit: 10,       // –ª–∏–º–∏—Ç –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ
  remaining: 8,    // –æ—Å—Ç–∞–ª–æ—Å—å
  subscription: "artist_pro"
}
```

---

### **3. FRONTEND - –ê–†–¢–ò–°–¢** ‚úÖ
```
üìÅ /src/app/components/track-upload-page.tsx
```

#### **TrackUploadPage - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∫–∏**

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```jsx
<TrackUploadPage>
  ‚îú‚îÄ‚îÄ UploadStats - –õ–∏–º–∏—Ç—ã –∑–∞–≥—Ä—É–∑–æ–∫
  ‚îú‚îÄ‚îÄ CoverUpload - Drag & Drop –æ–±–ª–æ–∂–∫–∏
  ‚îú‚îÄ‚îÄ AudioUpload - Drag & Drop –∞—É–¥–∏–æ (+ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
  ‚îú‚îÄ‚îÄ TrackInfoForm - –ù–∞–∑–≤–∞–Ω–∏–µ, –∞—Ä—Ç–∏—Å—Ç, –∂–∞–Ω—Ä
  ‚îî‚îÄ‚îÄ StreamingLinks - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏
</TrackUploadPage>
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- ‚úÖ Drag & Drop –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ü—Ä–µ–≤—å—é –æ–±–ª–æ–∂–∫–∏
- ‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞—É–¥–∏–æ
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ (–æ–±–ª–æ–∂–∫–∞ 5–ú–ë, –∞—É–¥–∏–æ 50–ú–ë)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –∑–∞–≥—Ä—É–∑–æ–∫
- ‚úÖ Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω (mobile + desktop)

**–õ–∏–º–∏—Ç—ã –ø–æ –ø–æ–¥–ø–∏—Å–∫–∞–º:**
```
basic:        1 —Ç—Ä–µ–∫/–º–µ—Å—è—Ü
artist_start: 3 —Ç—Ä–µ–∫–∞/–º–µ—Å—è—Ü
artist_pro:   10 —Ç—Ä–µ–∫–æ–≤/–º–µ—Å—è—Ü
artist_elite: 999 —Ç—Ä–µ–∫–æ–≤/–º–µ—Å—è—Ü (–±–µ–∑–ª–∏–º–∏—Ç)
label:        –±–µ–∑–ª–∏–º–∏—Ç
```

**UI/UX:**
- Glassmorphism —Å—Ç–∏–ª—å
- –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ (Framer Motion)
- –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

---

### **4. FRONTEND - –ê–î–ú–ò–ù** ‚úÖ
```
üìÅ /src/admin/pages/AdminTrackModeration.tsx
```

#### **AdminTrackModeration - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏**

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```jsx
<AdminTrackModeration>
  ‚îú‚îÄ‚îÄ Filters - –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
  ‚îú‚îÄ‚îÄ BatchActionsBar - –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
  ‚îú‚îÄ‚îÄ TracksGrid - –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç—Ä–µ–∫–æ–≤
  ‚îú‚îÄ‚îÄ ModerationCard - –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç—Ä–µ–∫–∞
  ‚îî‚îÄ‚îÄ ModerationModal - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
</AdminTrackModeration>
```

**–§–∏–ª—å—Ç—Ä—ã:**
```
üîç –ü–æ–∏—Å–∫ - –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/–∞—Ä—Ç–∏—Å—Ç—É
üìä –°—Ç–∞—Ç—É—Å - pending/approved/rejected/published
üéµ –ñ–∞–Ω—Ä - 27 –∂–∞–Ω—Ä–æ–≤
‚≠ê –û—Ü–µ–Ω–∫–∞ - min/max (1-10)
üìÖ –ü–µ—Ä–∏–æ–¥ - —Å–µ–≥–æ–¥–Ω—è/–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü/–≤—Å–µ
üìß Email - –∑–∞–≥—Ä—É–∑–∏–≤—à–µ–≥–æ
```

**–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**
```jsx
// –í—ã–±–æ—Ä —Ç—Ä–µ–∫–æ–≤
- –ß–µ–∫–±–æ–∫—Å –Ω–∞ –∫–∞–∂–¥–æ–º —Ç—Ä–µ–∫–µ
- "–í—ã–±—Ä–∞—Ç—å –≤—Å–µ" –¥–ª—è –≤—Å–µ—Ö —Ç—Ä–µ–∫–æ–≤
- BatchActionsBar –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ

// –î–µ–π—Å—Ç–≤–∏—è
‚úÖ –û–¥–æ–±—Ä–∏—Ç—å –≤—Å–µ - –æ—Ü–µ–Ω–∫–∞ 7/10, –∞–≤—Ç–æ–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å –≤—Å–µ - –∑–∞–ø—Ä–æ—Å –ø—Ä–∏—á–∏–Ω—ã
```

**–ú–æ–¥–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–∫–∞:**
```jsx
<ModerationModal>
  ‚îú‚îÄ‚îÄ Track Preview - –æ–±–ª–æ–∂–∫–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ, –∞—Ä—Ç–∏—Å—Ç
  ‚îú‚îÄ‚îÄ Audio Player - –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ
  ‚îú‚îÄ‚îÄ Streaming Links - —Å—Å—ã–ª–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
  ‚îú‚îÄ‚îÄ Actions: [–û–¥–æ–±—Ä–∏—Ç—å] [–û—Ç–∫–ª–æ–Ω–∏—Ç—å]
  ‚îî‚îÄ‚îÄ Form:
      ‚îú‚îÄ‚îÄ –û—Ü–µ–Ω–∫–∞ (1-10)
      ‚îú‚îÄ‚îÄ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞
      ‚îî‚îÄ‚îÄ –ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è (–¥–ª—è reject)
</ModerationModal>
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- ‚úÖ –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∞—É–¥–∏–æ –ø–ª–µ–µ—Ä
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–æ–∫ (1-10)
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∞–¥–º–∏–Ω–∫—É:**
```
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–ú–æ–¥–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–∫–æ–≤"
‚úÖ –ò–∫–æ–Ω–∫–∞ Music2
‚úÖ Badge —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º pending —Ç—Ä–µ–∫–æ–≤
‚úÖ –†–æ—É—Ç: /admin?tab=track-moderation
```

---

## üîÑ **WORKFLOW:**

### **–®–∞–≥ 1: –ê—Ä—Ç–∏—Å—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç—Ä–µ–∫**
```
1. –ê—Ä—Ç–∏—Å—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç TrackUploadPage
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ª–∏–º–∏—Ç –∑–∞–≥—Ä—É–∑–æ–∫
3. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –æ–±–ª–æ–∂–∫—É + –∞—É–¥–∏–æ
4. –ó–∞–ø–æ–ª–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –∞—Ä—Ç–∏—Å—Ç, –∂–∞–Ω—Ä)
5. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
6. –ñ–º—ë—Ç "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é"
7. –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ Supabase Storage
8. –°–æ–∑–¥–∞–µ—Ç—Å—è PendingTrack (status: pending)
9. –ê—Ä—Ç–∏—Å—Ç –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ ‚úÖ
10. –í—Å–µ –∞–¥–º–∏–Ω—ã –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ üîî
```

### **–®–∞–≥ 2: –ê–¥–º–∏–Ω –º–æ–¥–µ—Ä–∏—Ä—É–µ—Ç**
```
1. –ê–¥–º–∏–Ω –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç "–ú–æ–¥–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–∫–æ–≤"
2. –í–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ pending —Ç—Ä–µ–∫–æ–≤
3. –§–∏–ª—å—Ç—Ä—É–µ—Ç/–∏—â–µ—Ç –Ω—É–∂–Ω—ã–µ
4. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
5. –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç —Ç—Ä–µ–∫
6. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ

–û–î–û–ë–†–ï–ù–ò–ï:
  7a. –°—Ç–∞–≤–∏—Ç –æ—Ü–µ–Ω–∫—É (1-10)
  8a. –î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  9a. –ñ–º—ë—Ç "–û–¥–æ–±—Ä–∏—Ç—å –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"
  10a. Track —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –ø—É–±–ª–∏—á–Ω–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ
  11a. PendingTrack ‚Üí approved_and_migrated
  12a. –ê—Ä—Ç–∏—Å—Ç –ø–æ–ª—É—á–∞–µ—Ç +50 –∫–æ–∏–Ω–æ–≤ ü™ô
  13a. Email: "–¢—Ä–µ–∫ –æ–¥–æ–±—Ä–µ–Ω!" ‚úÖ
  14a. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º–µ

–û–¢–ö–õ–û–ù–ï–ù–ò–ï:
  7b. –£–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏—á–∏–Ω—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
  8b. –°—Ç–∞–≤–∏—Ç –æ—Ü–µ–Ω–∫—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  9b. –î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  10b. –ñ–º—ë—Ç "–û—Ç–∫–ª–æ–Ω–∏—Ç—å"
  11b. PendingTrack ‚Üí rejected
  12b. Email: "–¢—Ä–µ–∫ –æ—Ç–∫–ª–æ–Ω–µ–Ω: {–ø—Ä–∏—á–∏–Ω–∞}" ‚ùå
  13b. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º–µ
  14b. –¢—Ä–µ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ PendingTrack (–Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è)
```

### **–®–∞–≥ 3: –†–µ–∑—É–ª—å—Ç–∞—Ç**
```
–û–î–û–ë–†–ï–ù–û:
‚úÖ –¢—Ä–µ–∫ –≤ –ø—É–±–ª–∏—á–Ω–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ (tracks_84730125)
‚úÖ Status: 'new'
‚úÖ play_count: 0, likes_count: 0
‚úÖ –°–≤—è–∑—å: source_pending_id ‚Üí PendingTrack
‚úÖ –ê—Ä—Ç–∏—Å—Ç –≤–∏–¥–∏—Ç —Ç—Ä–µ–∫ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
‚úÖ +50 –∫–æ–∏–Ω–æ–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ

–û–¢–ö–õ–û–ù–ï–ù–û:
‚ùå –¢—Ä–µ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ PendingTrack
‚ùå Status: rejected
‚ùå –ê—Ä—Ç–∏—Å—Ç –≤–∏–¥–∏—Ç –ø—Ä–∏—á–∏–Ω—É
‚ùå –ú–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
```

---

## üìä **–°–¢–ê–¢–£–°–´ –ú–û–î–ï–†–ê–¶–ò–ò:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ pending  ‚îÇ ‚Üê –ó–∞–≥—Ä—É–∂–µ–Ω, –∂–¥–µ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ
     ‚îú‚îÄ‚Üí approved ‚îÄ‚Üí approved_and_migrated ‚úÖ
     ‚îÇ                (–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ)
     ‚îÇ
     ‚îî‚îÄ‚Üí rejected ‚ùå
         (–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ)
```

---

## üí∞ **–°–ò–°–¢–ï–ú–ê –ù–ê–ì–†–ê–î:**

```
–û–¥–æ–±—Ä–µ–Ω–Ω—ã–π —Ç—Ä–µ–∫ = +50 Promo-–∫–æ–∏–Ω–æ–≤ ü™ô

–ó–∞–ø–∏—Å—å –≤ promo_coins_transactions_84730125:
{
  user_id: uploader.id,
  amount: 50,
  transaction_type: 'track_upload',
  description: '–¢—Ä–µ–∫ "{title}" –æ–¥–æ–±—Ä–µ–Ω –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω',
  related_entity_type: 'track',
  related_entity_id: newTrack.id,
  status: 'completed'
}

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ users_84730125:
{
  promo_coins_balance: currentBalance + 50
}
```

---

## üîí **–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨:**

### **RLS –ü–æ–ª–∏—Ç–∏–∫–∏:**
```sql
‚úÖ –ê–¥–º–∏–Ω—ã –≤–∏–¥—è—Ç –≤—Å–µ —Ç—Ä–µ–∫–∏
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏
‚úÖ –¢–æ–ª—å–∫–æ –∞—Ä—Ç–∏—Å—Ç—ã/–ª–µ–π–±–ª—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ pending —Ç—Ä–µ–∫–∏
‚úÖ –ê–¥–º–∏–Ω—ã –º–æ–≥—É—Ç –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ç—Ä–µ–∫–∏
```

### **Backend –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```typescript
‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Bearer token
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ (artist/label –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏)
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ (admin –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏)
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –∑–∞–≥—Ä—É–∑–æ–∫
‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç SQL injection (Supabase SDK)
‚úÖ Rate limiting (—á–µ—Ä–µ–∑ Supabase)
```

---

## üì± **–ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨:**

### **Desktop (1920px):**
```
‚úÖ Grid 3 –∫–æ–ª–æ–Ω–∫–∏ (–∫–∞—Ä—Ç–æ—á–∫–∏ —Ç—Ä–µ–∫–æ–≤)
‚úÖ –ü–æ–ª–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
‚úÖ Batch actions bar
‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ (–º–∞–∫—Å 2xl)
‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–ª–µ–µ—Ä
```

### **Tablet (768px):**
```
‚úÖ Grid 2 –∫–æ–ª–æ–Ω–∫–∏
‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
‚úÖ Touch-friendly UI
```

### **Mobile (375px):**
```
‚úÖ Grid 1 –∫–æ–ª–æ–Ω–∫–∞
‚úÖ Select –≤–º–µ—Å—Ç–æ —Ç–∞–±–æ–≤
‚úÖ –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–∞—è –º–æ–¥–∞–ª–∫–∞
‚úÖ Swipe gestures
```

---

## üé® **–î–ò–ó–ê–ô–ù:**

### **–ê—Ä—Ç–∏—Å—Ç (Glassmorphism):**
```css
bg: gradient-to-br from-gray-900 via-gray-800 to-gray-900
cards: bg-white/5 backdrop-blur-sm border border-white/10
buttons: gradient-to-r from-cyan-500 to-purple-500
hover: scale-105
animations: Framer Motion
```

### **–ê–¥–º–∏–Ω (Clean Modern):**
```css
bg: gray-50
cards: bg-white shadow-sm border border-gray-200
buttons: bg-purple-600 hover:bg-purple-700
badges: status-based colors
animations: subtle transitions
```

---

## üß™ **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:**

### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ê—Ä—Ç–∏—Å—Ç basic –ø–ª–∞–Ω**
```
1. –õ–æ–≥–∏–Ω –∫–∞–∫ artist (subscription: basic)
2. –û—Ç–∫—Ä—ã—Ç—å TrackUploadPage
3. –í–∏–¥–∏–º: "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: 0 / 1 —Ç—Ä–µ–∫–æ–≤"
4. –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç—Ä–µ–∫ ‚Üí Success
5. –í–∏–¥–∏–º: "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: 1 / 1 —Ç—Ä–µ–∫–æ–≤"
6. –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ ‚Üí Error:
   "–í—ã –¥ÔøΩÔøΩ—Å—Ç–∏–≥–ª–∏ –ª–∏–º–∏—Ç–∞ –∑–∞–≥—Ä—É–∑–æ–∫. –û–±–Ω–æ–≤–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É."
7. ‚úÖ –õ–∏–º–∏—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ê–¥–º–∏–Ω –º–æ–¥–µ—Ä–∏—Ä—É–µ—Ç**
```
1. –õ–æ–≥–∏–Ω –∫–∞–∫ admin
2. –û—Ç–∫—Ä—ã—Ç—å "–ú–æ–¥–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–∫–æ–≤"
3. –í–∏–¥–∏–º pending —Ç—Ä–µ–∫–∏
4. –í—ã–±–∏—Ä–∞–µ–º —Ç—Ä–µ–∫ ‚Üí "–ú–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å"
5. –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–µ–º –≤ –º–æ–¥–∞–ª–∫–µ
6. –û–¥–æ–±—Ä—è–µ–º (–æ—Ü–µ–Ω–∫–∞ 8/10)
7. ‚úÖ –¢—Ä–µ–∫ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω
8. ‚úÖ –ê—Ä—Ç–∏—Å—Ç –ø–æ–ª—É—á–∏–ª +50 –∫–æ–∏–Ω–æ–≤
9. ‚úÖ Email –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 3: Batch –º–æ–¥–µ—Ä–∞—Ü–∏—è**
```
1. –ê–¥–º–∏–Ω –≤—ã–±–∏—Ä–∞–µ—Ç 5 —Ç—Ä–µ–∫–æ–≤
2. –ñ–º—ë—Ç "–û–¥–æ–±—Ä–∏—Ç—å –≤—Å–µ"
3. –í—Å–µ 5 —Ç—Ä–µ–∫–æ–≤ ‚Üí approved_and_migrated
4. –ö–∞–∂–¥—ã–π –∞—Ä—Ç–∏—Å—Ç –ø–æ–ª—É—á–∏–ª +50 –∫–æ–∏–Ω–æ–≤
5. ‚úÖ –ú–∞—Å—Å–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

---

## üìÅ **–°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í:**

```
üì¶ promo.music
‚îú‚îÄ‚îÄ üìÑ SQL_TRACK_MODERATION.sql (SQL —Å—Ö–µ–º–∞)
‚îú‚îÄ‚îÄ üìÅ supabase/functions/server/
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ track-moderation-routes.tsx (Backend API)
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ index.tsx (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ—É—Ç–æ–≤)
‚îú‚îÄ‚îÄ üìÅ src/app/components/
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ track-upload-page.tsx (–ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–µ–∫–∞)
‚îî‚îÄ‚îÄ üìÅ src/admin/
    ‚îú‚îÄ‚îÄ üìÅ pages/
    ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ AdminTrackModeration.tsx (–ú–æ–¥–µ—Ä–∞—Ü–∏—è)
    ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ admin-tabs-index.tsx (—ç–∫—Å–ø–æ—Ä—Ç)
    ‚îú‚îÄ‚îÄ üìÅ layouts/
    ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ AdminLayoutNew.tsx (–≤–∫–ª–∞–¥–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞)
    ‚îî‚îÄ‚îÄ üìÑ AdminApp.tsx (—Ä–æ—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω)
```

---

## üöÄ **–ó–ê–ü–£–°–ö –°–ò–°–¢–ï–ú–´:**

### **1. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã:**
```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL_TRACK_MODERATION.sql –≤ Supabase Dashboard
# SQL Editor ‚Üí New Query ‚Üí –í—Å—Ç–∞–≤–∏—Ç—å –∫–æ–¥ ‚Üí Run
```

### **2. Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω:**
```typescript
// —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ index.tsx:
app.route("/make-server-84730125/api/track-moderation", trackModerationRoutes);
```

### **3. Frontend –≥–æ—Ç–æ–≤:**
```typescript
// –ê—Ä—Ç–∏—Å—Ç:
// –î–æ–±–∞–≤–∏—Ç—å –≤ App.tsx —Ä–æ—É—Ç –¥–ª—è TrackUploadPage

// –ê–¥–º–∏–Ω:
// –í–∫–ª–∞–¥–∫–∞ "–ú–æ–¥–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–∫–æ–≤" —É–∂–µ –µ—Å—Ç—å!
```

---

## üéØ **API ENDPOINTS (—Å–≤–æ–¥–∫–∞):**

```
POST   /api/track-moderation/submitTrack
GET    /api/track-moderation/pendingTracks
POST   /api/track-moderation/manageTrackModeration
POST   /api/track-moderation/batchModeration
GET    /api/track-moderation/genres
GET    /api/track-moderation/uploadStats
```

**Base URL:**
```
https://{projectId}.supabase.co/functions/v1/make-server-84730125
```

**Authorization:**
```
Authorization: Bearer {token}
```

---

## ‚úÖ **–ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!**

–°–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–∫–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–∑–¥–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ:

```
‚úÖ SQL —Ç–∞–±–ª–∏—Ü—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏
‚úÖ Backend API (6 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
‚úÖ Frontend –¥–ª—è –∞—Ä—Ç–∏—Å—Ç–æ–≤ (–∑–∞–≥—Ä—É–∑–∫–∞)
‚úÖ Frontend –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ (–º–æ–¥–µ—Ä–∞—Ü–∏—è)
‚úÖ –°–∏—Å—Ç–µ–º–∞ –ª–∏–º–∏—Ç–æ–≤
‚úÖ –°–∏—Å—Ç–µ–º–∞ –Ω–∞–≥—Ä–∞–¥ (–∫–æ–∏–Ω—ã)
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (email + in-app)
‚úÖ –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (RLS)
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```

---

## üìà **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:**

1. ‚úÖ **–í—ã–ø–æ–ª–Ω–∏—Ç—å SQL —Å–∫—Ä–∏–ø—Ç** –≤ Supabase
2. ‚úÖ **–î–µ–ø–ª–æ–π backend** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ push)
3. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å —Ä–æ—É—Ç –¥–ª—è TrackUploadPage** –≤ App.tsx
4. ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** —Å–∏—Å—Ç–µ–º—É
5. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Email** —à–∞–±–ª–æ–Ω—ã
6. ‚úÖ **–ü–æ–¥–∫–ª—é—á–∏—Ç—å Supabase Storage** –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

---

## üéä **–°–ò–°–¢–ï–ú–ê –†–ê–ë–û–¢–ê–ï–¢!**

–¢–µ–ø–µ—Ä—å –∞—Ä—Ç–∏—Å—Ç—ã –º–æ–≥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ç—Ä–µ–∫–∏, –∞ –∞–¥–º–∏–Ω—ã –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Ö —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –∫–∞—á–µ—Å—Ç–≤–∞! üéµ‚ú®

**Made with üéµ by PROMO.MUSIC development team**

---

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞:** 29 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ PRODUCTION READY
